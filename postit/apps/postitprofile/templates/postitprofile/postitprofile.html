{% extends 'core/base.html' %}

{% load humanize %}

{% block content %}
	<div class="container">
		<div class="columns">
			<div class="column is-12"> 
				<h1 class="title"> {{ user.username }}</h1>

				{% if user.postitprofile.avatar %}
					<figure class="image is-128x128">
						<img src="{{user.postitprofile.avatar.url}}">
					</figure>
				{% endif%}

				<p> <a href = "{% url 'followers' user.username %}"> Followers: {{ user.postitprofile.followed_by.count }} </a></p>
				<p> <a href = "{% url 'follows' user.username %}"> Follows: {{ user.postitprofile.follows.count }} </a></p>

				{% if user != request.user %}
					{% if request.user.postitprofile in user.postitprofile.followed_by.all %}
						<a href="{% url 'unfollow_poster' user.username %}" class = "button is-danger"> Unfollow </a>
					{% else %}
						<a href="{% url 'follow_poster' user.username %}" class = "button is-success"> Follow </a>
					{% endif %}
				{% endif %}
			</div>
		</div>

		<div class="columns">
			<div class="column is-8">
				<div class="wrapper-posts">
					{% for post in user.post.all %}
						<div class="post">
							<article class="media">
								<figure class="media-left">
									<p class="image is-64x64">
										{%if user.postitprofile.avatar %}
											<img src="{{ user.postitprofile.avatar.url }}">
										{% endif %}
									</p>
								</figure>

								<div class="media-content">
									<div class="content">
										<p>
											<strong> {{ post.created_by.username }} </strong>
											<small> {{ post.created_at | naturaltime }} </small>
											<br>
											{{post.body}}
										</p>
									</div>
								</div>
							</article>
						</div>
					{% endfor%}
				</div>
			</div>
		</div>
	</div>
{% endblock %}